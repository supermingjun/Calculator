# Calculator
This calculator is the homework of the university's second-grade java course and is a calculator that imitates the windows system. The V1.0 version temporarily implements the functions of a standard calculator. It includes integer arithmetic operations (large integers), decimal arithmetic operations, reciprocals, open squares, and n root functions.（这个计算器是大学二年级的java课程的作业，是模仿windows系统下的计算器。V1.0版本暂时实现了标准型计算器的功能。它包括整数（大整数）、小数的四则运算，求倒数，求开平方，求n次方根等操作。）

**一、实验目的**

1、熟练掌握java面向对象编程。

2、选择合适的数据结构实现需求。

3、熟练使用各种控制结构。

4、掌握GUI组件、事件处理技术。

**二、实验任务**

1、设计一个简易的计算器，可以进行四则运算：加、减、乘、除等（限于十进制下）

程序要求：

（1）应具有相应的界面

（2）操作符号定为：“+”，“-”，“*”，“/”，“(”,“)”等。（按国际惯例设计）

（3）用户通过点击面板中的各种组件输入的表达式，应在上方文本框中显示。

（4）当用户点击“=”时，文本框中之前的内容应清空，直接显示表达式运算结果。例如：输入表达式“3+2*（8-5）”之后按“=”，显示结果“9”。

（5）具有菜单栏，内有相应的编辑“复制”、“粘贴”等菜单，提供相应的功能。

以上部分为必须完成的内容。

2、选作功能，可参考windows系统附带计算器：

​    （1）具有各种的科学计算功能。例如“图示2”中的各种科学计算功能。

**三、开发工具与平台**

开发工具：Eclipse IDE for Java Developers   (Version: Oxygen.3 Release (4.7.3))

平    台：Microsoft Windows 10  (Version: 1803) + JDK1.8   

**四、设计思路**

1、界面设计

主体界面如图所示，整体使用了beautyeye_Inf.jar 的UI美化包让界面更加美观。

整体布局为：GridLayout(7, 1)


2、逻辑设计

①表达式容错检测：程序会对用户输入的表达式进行完整性、可行性检测

确保用户输入的表达式是可以正常运行的，否则会给出相应的警告。

错误检测包括（1）括号是否匹配（在按下“=”的时候检测）

​                       （2）表达式是否以数字结尾（在按下“=”的时候检测）

​                       （3）是否出现除0错误（在计算的过程中，进行异常处理）

​                       （4）不允许用户连续输入两个二目运算符

​                       （5）不允许出现7…6  5.  .5 等情况

​                      （6）不允许对负数开方等…

②计算原理

​       设置“数字栈”、“字符栈”，然后根据各运算符的优先级，和相同优先级下是从左到右计算，来进行后缀转化。（转化后括号消失），对后缀表达式进行计算，并把结果写到输出框中。

后缀转换基本规则(初始化一个空栈)

1:当是数字时，立即输出。

2:是运算符时，若栈空，推入，栈不空，从栈顶弹出元素直到发现优先级更低的为止。

   (该条规则只适用于优先级相同时从左到右计算)

3:   ( 推入。   

4:  )  弹出，直到遇到左括号

5:  左右括号不写入后缀表达式。

 

**五、实验总结**

**1****、实验结果（程序测试）展示**

测试①：幂运算，计算56的10次方，结果正确


测试②：超长表达式 对（（89-27）*65-85 +66^2


测试③：测试括号匹配（（666 + 999 -46454


测试④：逻辑错误测试： 9999-  或 5. 等


测试⑤：除0错误


测试⑥：历史记录


测试⑦ 复制粘贴（演示粘贴“这是复制的内容”，当然这只是做演示，是不能正常计算的）

**2****、实验总结**

**通过本次计算器实验，我加深了对****GUI****网格布局的理解，其实这个实验的****GUI****设计很简单，就几个按钮和文本显示框。这次的重难点还是在于对表达式的容错处理和计算上。当然了，还应该考虑到，如果一个表达式的计算量相当大，应该考虑采用多线程技术，让计算在后台进行时，界面不至于卡死。**

**六、附录**

参考程序：

[1]java程序设计教程

[2]张舒.GUI 课件

[3]部分计算算法参考自网络